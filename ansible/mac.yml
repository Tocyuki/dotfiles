---
- name: add tap repository
  homebrew_tap:
    tap: "{{ item }}"
    state: present
  loop:
    - homebrew/cask-fonts
    - homebrew/cask-drivers
    - gjbae1212/gossm
  tags:
    - package

- name: install brew packages
  ignore_errors: true
  homebrew:
    name: "{{ item }}"
    state: present
    update_homebrew: yes
  loop:
    - git
    - fish
    - vim
    - tmux
    - lazygit
    - lazydocker
    - go
    - nodejs
    - ghq
    - ag
    - fzf
    - awscli
    - github/gh/gh
    - tree
    - htop
    - yarn
    - watch
    - tflint
    - driftctl
    - act
    - kayac/tap/ecspresso
    - fujiwara/tap/lambroll
    - mysql-client
    - jq
    - fd
    - bat
    - gossm
    - gibo
    - act
    - deno
    - grep
    - yukiarrr/tap/ecsk
    - kubectl
    - minikube
    - asdf
    - exercism
  tags:
    - package

- name: install cask packages
  community.general.homebrew_cask:
    name: "{{ item }}"
    state: present
    install_options: force
  loop:
    - font-hack-nerd-font
    - google-chrome
    - intellij-idea
    - 1password
    - slack
    - iterm2
    - docker
    - google-japanese-ime
    - notion
    - anki

  tags:
    - package

- name: install cdktf
  npm:
    name: cdktf
    global: yes
  tags:
    - package

- name: install pip module
  pip:
    name: "{{ item }}"
    executable: pip3
  loop:
    - pep8
    - flake8
    - pylint
    - poetry
  tags:
    - package

- name: add poetry auto complete
  ignore_errors: true
  shell: poetry completions fish > ~/.config/fish/completions/poetry.fish
  tags:
    - package

